<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nexus // Profile</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #000; --panel: #0a0a0a; --accent: #00A2FF; --border: #1a1a1a; }
        body { background: var(--bg); color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; display: flex; justify-content: center; }
        .profile-card { width: 500px; background: var(--panel); border: 1px solid var(--border); margin-top: 50px; border-radius: 20px; padding: 40px; text-align: center; }
        .pfp-large { width: 150px; height: 150px; border-radius: 50%; border: 4px solid var(--accent); margin-bottom: 20px; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .stat-box { background: #111; padding: 15px; border-radius: 12px; border: 1px solid var(--border); }
        .btn-report { background: #ff4444; color: white; border: none; padding: 10px 20px; border-radius: 8px; margin-top: 20px; cursor: pointer; font-weight: 800; }
    </style>
</head>
<body>
    <div class="profile-card">
        <img id="view-pfp" class="pfp-large" src="">
        <h1 id="view-name" style="margin:0;">Loading...</h1>
        <p id="view-handle" style="color:#555;"></p>
        
        <div class="stat-grid">
            <div class="stat-box"><small>RANK</small><div id="view-rank" style="font-weight:800;">Member</div></div>
            <div class="stat-box"><small>STATUS</small><div style="color:#00ff00; font-weight:800;">Verified</div></div>
        </div>

        <button class="btn-report" onclick="openReport()">REPORT USER</button>
    </div>

    <script>
        window.onload = async () => {
            const params = new URLSearchParams(window.location.search);
            const targetUser = params.get('user');
            
            // In a real setup, you'd fetch this from your database or Roblox API
            // For now, we'll use the URL data or look it up via RoProxy
            if(targetUser) {
                document.getElementById('view-name').innerText = targetUser;
                document.getElementById('view-handle').innerText = `@${targetUser.toLowerCase()}`;
                
                // Fetch Roblox PFP for this user
                const res = await fetch(`https://users.roproxy.com/v1/users/search?keyword=${targetUser}&limit=1`);
                const data = await res.json();
                if(data.data[0]) {
                    const thumbRes = await fetch(`https://thumbnails.roproxy.com/v1/users/avatar-headshot?userIds=${data.data[0].id}&size=150x150&format=Png&isCircular=true`);
                    const thumbData = await thumbRes.json();
                    document.getElementById('view-pfp').src = thumbData.data[0].imageUrl;
                }
            }
        };

        function openReport() {
            const reason = prompt("Reason for reporting this user?");
            if(reason) {
                // Send to Ably 'reports' channel
                alert("Report submitted to Adiyan Studio staff.");
            }
        }
    </script>
</body>
</html>
